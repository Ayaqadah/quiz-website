<!DOCTYPE html>
<html>
<head>
<title>Your Results ðŸŒ¿</title>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body {
    font-family: "Poppins", sans-serif;
    background: linear-gradient(135deg, #f3f7f4, #e1ece4);
    padding: 40px 15px;
    max-width: 900px;
    margin: auto;
    color: #2F3E34;
    animation: fadeIn 0.7s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Card */
#resultsBox {
    background: white;
    padding: 40px;
    border-radius: 25px;
    text-align: center;
    box-shadow: 0px 8px 25px rgba(0, 0, 0, 0.07);
    margin-bottom: 40px;
}

h1 {
    color: #7AA78B;
    font-size: 42px;
    font-weight: 600;
    margin-bottom: 10px;
}

h2 {
    color: #8EB897;
    font-size: 28px;
    margin-bottom: 12px;
}

p {
    font-size: 18px;
    margin: 5px 0;
}

/* Buttons */
.btn-area {
    margin-top: 20px;
}

.btn {
    padding: 12px 25px;
    border: none;
    border-radius: 18px;
    font-size: 17px;
    cursor: pointer;
    color: white;
    margin: 10px;
    transition: 0.3s;
}

.retry {
    background: #8EB897;
}

.retry:hover {
    background: #7AA78B;
}

.home {
    background: #A6C8B2;
}

.home:hover {
    background: #95B7A2;
}

/* Review section */
.review-title {
    text-align:center;
    color: #7AA78B;
    margin-bottom: 25px;
    font-size: 30px;
    font-weight: 600;
}

.question-box {
    background: white;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    margin-bottom: 20px;
}

.correct {
    color: #1a8f3a;
    font-weight: bold;
}

.wrong {
    color: #d61f3b;
    font-weight: bold;
}

</style>
</head>
<body>

<div id="resultsBox">
    <h1>Results ðŸŽ‰</h1>
    <h2 id="player"></h2>

    <p id="course"></p>
    <p id="module"></p>
    <p id="score"></p>

    <p id="message" style="font-weight:bold; margin-top:15px;"></p>

    <div class="btn-area">
        <button class="btn retry" onclick="window.location.href='quiz.html'">Retry Module</button>
        <button class="btn home" onclick="window.location.href='courses.html'">Back to Courses</button>
    </div>
</div>

<h1 class="review-title">Review Your Answers ðŸŒ¿</h1>

<div id="reviewContainer"></div>

<script>
/* Retrieve stored data */
let name = localStorage.getItem("playerName");
let course = localStorage.getItem("selectedCourse");
let moduleNum = localStorage.getItem("selectedModule");
let score = localStorage.getItem("score");
let reviewQuestions = JSON.parse(localStorage.getItem("reviewQuestions"));
let reviewAnswers = JSON.parse(localStorage.getItem("reviewAnswers"));

/* Top results section */
document.getElementById("player").innerText = `${name}, great job! ðŸ’—`;
document.getElementById("course").innerText = "Course: " + course;
document.getElementById("module").innerText = "Module: " + moduleNum;
document.getElementById("score").innerText = "Your Score: " + score;

/* Messages */
let msg = "";
let timeUp = localStorage.getItem("timeUp");

if (timeUp === "yes") {
    msg = "Time is up! â³";
    localStorage.removeItem("timeUp");
} else {
    if (score >= 8) msg = "WOW amazing ðŸŽ‰ You're killing this!";
    else if (score >= 5) msg = "Good job! Keep practicing ðŸŒ¿";
    else msg = "It's okay, try again! Youâ€™ll improve ðŸ’ªðŸŒ¿";
}

document.getElementById("message").innerText = msg;

/* Review Section */
const container = document.getElementById("reviewContainer");

reviewQuestions.forEach((q, i) => {
    let userAnswer = reviewAnswers[i];
    let correctAnswer = q.answer;

    let isCorrect = userAnswer === correctAnswer;

    container.innerHTML += `
    <div class="question-box">
        <h3>Q${i+1}: ${q.question}</h3>

        <p><strong>Your answer:</strong>
            <span class="${isCorrect ? 'correct' : 'wrong'}">
                ${userAnswer !== null && userAnswer !== undefined
                    ? q.options[userAnswer]
                    : "No answer"}
            </span>
        </p>

        <p><strong>Correct answer:</strong>
            <span class="correct">${q.options[correctAnswer]}</span>
        </p>
    </div>
    `;
});
</script>

</body>
</html>

