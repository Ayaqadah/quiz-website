<!DOCTYPE html>
<html>
<head>
  <title>Your Results ðŸ’—</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #ffe3ef;
      padding: 40px 20px;
      max-width: 900px;
      margin: auto;
      color: #444;
    }

    /* Results Box */
    #resultsBox {
      background: rgba(255, 255, 255, 0.9);
      padding: 40px;
      border-radius: 25px;
      text-align: center;
      box-shadow: 0px 8px 25px rgba(255, 150, 180, 0.4);
      margin-bottom: 40px;
    }

    h1 { color: #ff6fa8; font-size: 40px; margin-bottom: 10px; }
    h2 { color: #ff8fb8; font-size: 28px; margin-bottom: 5px; }
    p { font-size: 20px; margin: 8px 0; }

    /* Button styles */
    .btn-area {
      margin-top: 20px;
    }

    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 20px;
      font-size: 18px;
      cursor: pointer;
      color: white;
      margin: 10px;
      transition: 0.3s;
    }

    .btn:hover {
      transform: translateY(-3px);
    }

    .retry { background: #ff6fa8; }
    .home  { background: #a2d2ff; }

    /* Review Section */
    .question-box {
      background: white;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(255,150,180,0.3);
      margin-bottom: 20px;
    }

    .correct { color: #1a8f3a; font-weight: bold; }
    .wrong   { color: #d61f3b; font-weight: bold; }
  </style>
</head>
<body>

<div id="resultsBox">
  <h1>Results ðŸŽ‰</h1>
  <h2 id="player"></h2>

  <p id="course"></p>
  <p id="module"></p>
  <p id="score"></p>

  <p id="message" style="font-weight:bold; margin-top:15px;"></p>

  <div class="btn-area">
    <button class="btn retry" onclick="window.location.href='quiz.html'">Retry Module</button>
    <button class="btn home" onclick="window.location.href='courses.html'">Back to Courses</button>
  </div>
</div>

<h1 style="text-align:center; color:#ff6fa8; margin-bottom:20px;">
  Review Your Answers ðŸ’—
</h1>

<div id="reviewContainer"></div>

<script>
  /* Retrieve stored data */
  let name = localStorage.getItem("playerName");
  let course = localStorage.getItem("selectedCourse");
  let moduleNum = localStorage.getItem("selectedModule");
  let score = localStorage.getItem("score");
  let reviewQuestions = JSON.parse(localStorage.getItem("reviewQuestions"));
  let reviewAnswers = JSON.parse(localStorage.getItem("reviewAnswers"));

  /* Top results section */
  document.getElementById("player").innerText = `${name}, great job! ðŸ’—`;
  document.getElementById("course").innerText = "Course: " + course;
  document.getElementById("module").innerText = "Module: " + moduleNum;
  document.getElementById("score").innerText = "Your Score: " + score;

  /* Cute performance message */
let msg = "";
let timeUp = localStorage.getItem("timeUp");

/* If time ended, show ONLY the time message */
if (timeUp === "yes") {
  msg = "Time is up! â³";
  localStorage.removeItem("timeUp");
} else {
  /* Otherwise show normal score-based message */
  if (score >= 8) msg = "WOW amazing ðŸŽ‰ You're killing this!";
  else if (score >= 5) msg = "Good job! Keep practicing ðŸ’—";
  else msg = "It's okay, try again! Youâ€™ll get it ðŸ’ªðŸ’—";
}

document.getElementById("message").innerText = msg;


  /* Review Section */
  const container = document.getElementById("reviewContainer");

  reviewQuestions.forEach((q, i) => {
    let userAnswer = reviewAnswers[i];
    let correctAnswer = q.answer;

    let isCorrect = userAnswer === correctAnswer;

    container.innerHTML += `
      <div class="question-box">
        <h3>Q${i+1}: ${q.question}</h3>

        <p><strong>Your answer:</strong> 
          <span class="${isCorrect ? 'correct' : 'wrong'}">
            ${userAnswer !== null && userAnswer !== undefined 
              ? q.options[userAnswer] 
              : "No answer"}
          </span>
        </p>

        <p><strong>Correct answer:</strong> 
          <span class="correct">${q.options[correctAnswer]}</span>
        </p>
      </div>
    `;
  });
</script>

</body>
</html>
